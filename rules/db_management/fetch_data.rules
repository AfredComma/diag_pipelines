rule fetch_resistance_from_db:
    conda:
        "env/python-mysql.yaml"
    output:
        "resistance/phenotype_summary.tsv"
    params:
        samples = [sample_correspondance[x] for x in list(read_naming.keys())],
        conf = mysql_conf_file,
        id = db_to_use,
        soft = resistance_prediction_softwares
    script:
        "scripts/fetch_resistance_from_db.py"
        
        
rule fetch_mutations_from_db:
    conda:
        "env/python-mysql-pandas.yaml"
    output:
        "strains/{sample}/resistance/{sample}_summary.tsv",
        "strains/{sample}/resistance/{sample}_resistance_summary.xlsx"
    params:
        sample_corres = sample_correspondance,
        conf = mysql_conf_file,
        id = db_to_use,
        soft = resistance_prediction_softwares
    script:
        "scripts/fetch_mutations_from_db.py"


rule fetch_resistance_genes_from_db:
    conda:
        "env/python-mysql.yaml"
    output:
        "strains/{sample}/resistance/genes_summary.tsv"
    params:
        sample_corres= sample_correspondance,
        conf = mysql_conf_file,
        id = db_to_use,
        soft = resistance_prediction_softwares
    script:
        "scripts/fetch_genes_from_db.py"


