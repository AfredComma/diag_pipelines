include:
    "resistance.rules"

include:
    "virulence.rules"

rule report_virulence_saureus:
    input:
        qualimap_report = "quality/multiqc/assembly/multiqc_report.html",
        ete_figure = "virulence/virulence_staph.svg",
        #buble_plot_maxbin = expand("samples/{sample}/binning/maxbin/gc_cov_buble_test.svg", sample=list(read_naming.keys())),
        #kaiju_phylum = expand("samples/{sample}/binning/kaiju/report_phylum.txt", sample=list(read_naming.keys())),
        #chekm_maxbin = expand("samples/{sample}/binning/maxbin/checkm_bacteria/storage/bin_stats.analyze.tsv",
        #                      sample=list(read_naming.keys()))
        # "samples/{sample}/binning/kaiju/report_phylum.txt",
        # "samples/{sample}/binning/maxbin/checkm_bacteria/storage/bin_stats.analyze.tsv",
    output:
         "report_virulence_saureus.html",
    run:
        from snakemake.utils import report

        # with open(input[0]) as vcf:
        #    n_calls = sum(1 for l in vcf if not l.startswith("#"))
        # n_samples = list(read_naming.keys()
        report = '''
        
<!DOCTYPE html>


<html>
    <head>        
        
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    
    <style>
    
/* make sidebar nav vertical */
@media (min-width: 768px){
  .affix-content .container {
    width: 700px;
  }

  html,body{
    background-color: #f8f8f8;
    height: 100%%;
    overflow: hidden;
  }
    .affix-content .container .page-header{
    margin-top: 0;
  }
  .sidebar-nav{
        position:fixed;
        width:100%%;
  }
  .affix-sidebar{
    padding-right:0;
    font-size:small;
    padding-left: 0;
  }
  .affix-row, .affix-container, .affix-content{
    height: 100%%;
    margin-left: 0;
    margin-right: 0;
  }
  .affix-content{
    background-color:white;
  }
  .sidebar-nav .navbar .navbar-collapse {
    padding: 0;
    max-height: none;
  }
  .sidebar-nav .navbar{
    border-radius:0;
    margin-bottom:0;
    border:0;
  }
  .sidebar-nav .navbar ul {
    float: none;
    display: block;
  }
  .sidebar-nav .navbar li {
    float: none;
    display: block;
  }
  .sidebar-nav .navbar li a {
    padding-top: 12px;
    padding-bottom: 12px;
  }
}

@media (min-width: 769px){
  .affix-content .container {
    width: 600px;
  }
    .affix-content .container .page-header{
    margin-top: 0;
  }
}

@media (min-width: 992px){
  .affix-content .container {
  width: 900px;
  }
    .affix-content .container .page-header{
    margin-top: 0;
  }
}

@media (min-width: 1220px){
  .affix-row{
    overflow: hidden;
  }

  .affix-content{
    overflow: auto;
  }

  .affix-content .container {
    width: 1000px;
  }

  .affix-content .container .page-header{
    margin-top: 0;
  }
  .affix-content{
    padding-right: 30px;
    padding-left: 30px;
  }
  .affix-title{
    border-bottom: 1px solid #ecf0f1;
    padding-bottom:10px;
  }
  .navbar-nav {
    margin: 0;
  }
  .navbar-collapse{
    padding: 0;
  }
  .sidebar-nav .navbar li a:hover {
    background-color: #428bca;
    color: white;
  }
  .sidebar-nav .navbar li a > .caret {
    margin-top: 8px;
  }
}


* {box-sizing: border-box;}

body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

.topnav {
  overflow: hidden;
  background-color: #e9e9e9;
  position: top;
}

.topnav a {
  
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #2196F3;
  color: white;
}

.topnav .search-container {
  float: right;
}

.topnav input[type=text] {
  padding: 6px;
  margin-top: 8px;
  font-size: 17px;
  border: none;
}

.topnav .search-container button {
  float: right;
  padding: 6px 10px;
  margin-top: 8px;
  margin-right: 16px;
  background: #ddd;
  font-size: 17px;
  border: none;
  cursor: pointer;
}

.topnav .search-container button:hover {
  background: #ccc;
}

@media screen and (max-width: 600px) {
  .topnav .search-container {
    float: none;
  }
  .topnav a, .topnav input[type=text], .topnav .search-container button {
    float: none;
    display: block;
    text-align: left;
    width: 100%%;
    margin: 0;
    padding: 14px;
  }
  .topnav input[type=text] {
    border: 1px solid #ccc;
  }
}
body {
    padding-bottom: 50px;
}
    </style>
</head>

<div class="topnav">
  <a>Home</a>
</div>


<body style="position: absolute;">

    <div class="col-sm-2 col-md-1 affix-sidebar" style="padding-top: 0px;">
      <div class="sidebar-nav" >
        <div class="navbar navbar-default" role="navigation">
            <div class="navbar-collapse collapse sidebar-navbar-collapse">
              <ul class="nav navbar-nav" id="sidenav01">
                    <li class="active">

                    </li>
                    <li><a href="#quality">QC</a></li>
                    <li><a href="#phylogeny">Phylogeny</a></li>
                    <li><a href="-">Search</a></li>
                    <li><a href="-">BLAST</a></li>
              </ul>
            </div><!--/.nav-collapse -->
         </div>
      </div>
    </div>
    
    <div class="col-sm-10 col-md-11 affix-content">
            <h1 id="quality">Quality control</h1>
            <ul>
                <li><a href="%s">MULTIQC</a></li>
            </ul>
            <h1 id="phylogeny">Phylogeny</h1>
            <div>
                <img style="width:90%%" src="%s" align="top">
            </div>
            <h1 id="phylogeny">Antibiotic Resistances</h1>
            <h1 id="phylogeny">Virulence factors (VFDB)</h1>
            <h1 id="phylogeny">Phylogeny</h1>
            <h1 id="phylogeny">Minimum spanning tree</h1>
    </div>
</body>

                ''' % (input[0], input[1])

        print(report)

        with open(output[0], 'w') as f:
            f.write(report)
        f.close()


'''
rule all:
    input:
        "quality/multiqc/assembly/multiqc_report.html",
        "resistance/rgi_summary.xlsx"
'''